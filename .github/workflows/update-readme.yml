name: 🔄 Actualizar README con estadísticas privadas

on:
  schedule:
    - cron: "0 6 * * *"  # Todos los días a las 06:00 UTC
  workflow_dispatch:      # Permite activarlo manualmente desde la pestaña Actions

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: 🧾 Clonar repositorio
        uses: actions/checkout@v3

      - name: 📊 Generar estadísticas de GitHub con token privado
        env:
          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
        run: |
          echo "✅ Token privado disponible. Las estadísticas se actualizarán al hacer commit."

      - name: 📝 Regenerar README.md (ejemplo básico)
        run: |
          # Puedes regenerar tu README dinámicamente aquí si lo deseas.
          echo "Este paso se usaría para generar un README.md dinámico si se desea."

      - name: 📤 Subir cambios
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'
          git add README.md || echo "README no modificado"
          git commit -m '🔄 Actualizar README con estadísticas privadas' || echo "Sin cambios"
          git push
